#ONLY TAGRTES ONE PLANET

namespace = spySowUnrest

country_event = { #CHOOSE TARGET
	id = spySowUnrest.1
	title = spySowUnrest.title
	desc = spySowUnrest.desc 
	is_triggered_only = yes

	custom_gui = quibble_spy_window
	diplomatic = yes
	 
	immediate = {
		event_target:alphaNetworkTarget_temp = {
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_1
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_1
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_2
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_2
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_3
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_3
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_4
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_4
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_5
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_5
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_6
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_6
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_7
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_7
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_8
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_8
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_9
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_9
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_10
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_10
				}
			}

			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_11
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_11
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_12
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_12
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_13
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_13
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_14
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_14
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_15
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_15
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_16
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_16
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_17
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_17
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_18
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_18
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_19
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_19
				}
			}
			random_system_within_border = {
				limit = {
					any_system_planet = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
				}
				save_event_target_as = target_system_20
				random_system_planet = {
					limit = {
						sowUnrestPlanetFilter = yes
						is_colony = yes
					}
					save_event_target_as = target_planet_20
				}
			}
		}	
	}
	option = {
		name = spySowUnrest.1.1
		trigger = {
			exists = event_target:target_planet_1
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_1 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.2
		trigger = {
			exists = event_target:target_planet_2
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_2 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.3
		trigger = {
			exists = event_target:target_planet_3
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_3 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 } 
		}
	}
	option = {
		name = spySowUnrest.1.4
		trigger = {
			exists = event_target:target_planet_4
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_4 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.5
		trigger = {
			exists = event_target:target_planet_5
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_5 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.6
		trigger = {
			exists = event_target:target_planet_6
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_6 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.7
		trigger = {
			exists = event_target:target_planet_7
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_7 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.8
		trigger = {
			exists = event_target:target_planet_8
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_8 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.9
		trigger = {
			exists = event_target:target_planet_9
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_9 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.10
		trigger = {
			exists = event_target:target_planet_10
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_10 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}

	option = {
		name = spySowUnrest.1.11
		trigger = {
			exists = event_target:target_planet_11
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_11 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.12
		trigger = {
			exists = event_target:target_planet_12
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_12 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.13
		trigger = {
			exists = event_target:target_planet_13
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_13 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.14
		trigger = {
			exists = event_target:target_planet_14
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_14 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.15
		trigger = {
			exists = event_target:target_planet_15
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_15 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.16
		trigger = {
			exists = event_target:target_planet_16
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_16 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.17
		trigger = {
			exists = event_target:target_planet_17
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_17 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.18
		trigger = {
			exists = event_target:target_planet_18
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_18 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.19
		trigger = {
			exists = event_target:target_planet_19
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_19 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {
		name = spySowUnrest.1.20
		trigger = {
			exists = event_target:target_planet_20
		}
		custom_gui = quibble_spy_option
		hidden_effect = {
			event_target:target_planet_20 = {
				save_event_target_as = finalPlanetTarget
			}
			country_event = { id = progressTrackerA.1  }
			country_event = { id = agencyGlobal.2 }
		}
	}
	option = {  #CANCEL REDEPLOY
		name = agencyNeighborslist.z
		hidden_effect = {
			remove_country_flag = sowUnrest
			set_country_flag = gatherIntelAlpha
			country_event = {
				id = progressTrackerA.1
			}
			country_event = {
				id = agencyGlobal.2
			}
		}
	}
}


country_event = { #ROLL FOR SUCCESS LEVEL
	id = spySowUnrest.10
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_list = {
			50 = {
				country_event = { id = spySowUnrest.2 }
			}
			50 = {
				country_event = { id = spySowUnrest.3 }
			}
		}
	}
}

	
country_event = { #SUCCESS 
	id = spySowUnrest.2
	title = spySowUnrest2.title
	desc = spySowUnrest2.desc
	is_triggered_only = yes
	picture = GFX_evt_civil_action
	show_sound = event_planetary_riot
	
	immediate = {
		event_target:finalPlanetTarget = {
			add_modifier = {
				modifier = sowUnrestHigh_mod
				days = @sowUnrestModLength
			}
		}
	}

	option = { #REDO
		name = spySowUnrest.2.a
		custom_tooltip = pointsRequiredAlpha.tooltip
        	allow = {
            hidden_trigger = {
					has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
				
			}
		}
		
		hidden_effect = {
			removeGatherProgress_Alpha_F = yes
			country_event = {
				id = progressTrackerA.1
			}
		}
	}

	option = { #RETURN TO INTEL GATHERING
		name = spySowUnrest.2.b
		hidden_effect = {
			remove_country_flag = sowUnrest
			set_country_flag = gatherIntelAlpha
			country_event = {
				id = progressTrackerA.1 
			}
	   }
	}
}


country_event = { #PARTIAL SUCCESS 
	id = spySowUnrest.3
	title = spySowUnrest3.title
	desc = spySowUnrest3.desc
	is_triggered_only = yes
	picture = GFX_evt_civil_action
	show_sound = event_planetary_riot

	immediate = {
		event_target:finalPlanetTarget = {
			add_modifier = {
				modifier = sowUnrest_mod
				days = @sowUnrestModLength
			}
		}
	}

	option = { #REDO
		name = spySowUnrest.2.a
		custom_tooltip = pointsRequiredAlpha.tooltip
        	allow = {
            hidden_trigger = {
					has_resource = { type = sr_alpha_points amount >= @operationCostCheck } 
				
				
			}
		}
		
		hidden_effect = {
			removeGatherProgress_Alpha_F = yes
			country_event = {
				id = progressTrackerA.1
			}
		}
	}

	option = { #RETURN TO INTEL GATHERING
		name = spySowUnrest.2.b 
		hidden_effect = {
			remove_country_flag = sowUnrest
			set_country_flag = gatherIntelAlpha
			country_event = {
				id = progressTrackerA.1 
			}
	   }
	}
}

